[system]
sql=\
with \
(select concat(g, cast (AGGRTIME DIV 1000 as string)) k, hllp(x) b from t group by g coordinate by time with aggr interval 60 seconds) tmp, \
(select tmp.k k, hllp_merge(tmp.b, tdedim.b) ball from tmp left join tdedim on tmp.k=tdedim.k) tmp2 \
insert into tdedim with tmp2.k as KEY select k, ball from tmp2, \
insert into dest select k, hllp_get(ball) from tmp2

[tabledesc-1]
table.name=t
table.fields=g,string,:x,string,:time,bigint,
table.field.splitter=,
table.list.splitter=;
table.map.splitter=:

table.zk.servers=tl-zk-test1:2181,tl-zk-test2:2181,tl-zk-test3:2181,tl-zk-test4:2181,tl-zk-test5:2181
table.zk.root=/meta
table.topic=boss
table.interfaceId=1
table.field.splitter=|

[tabledesc-dimtable]
table.type=tde
table.name=tdedim
table.fields=k,string,:b,binary,
table.field.key=k
table.binary.mode=true

table.field.splitter=,
table.list.splitter=;
table.map.splitter=:

table.tde.master=10.198.15.22:5198
table.tde.slave=10.198.15.99:5198
table.tde.groupname=wx_gk_tdengine
table.tde.tid=1004
table.tde.timeout=5000


[tabledesc-2]
table.name=dest
table.binary.mode=false
table.fields=k,string,:cd,bigint,
table.field.splitter=,
table.list.splitter=;
table.map.splitter=:

table.zk.servers=tl-zk-test1:2181,tl-zk-test2:2181,tl-zk-test3:2181,tl-zk-test4:2181,tl-zk-test5:2181
table.zk.root=/meta
table.topic=snglogserver
table.interfaceId=1
table.field.splitter=|



