[system]
sql=INSERT INTO t_trc_inf_call_1_min SELECT from_unixtime(AGGRTIME DIV 1000, 'yyyyMMddHHmm'),vAppid,vCmdid,iResult,count(1),avg(dProcessTime) FROM Msdk_server_Log_Route WHERE length(vAppid)<50 AND ((vAppid like "wx%") OR (vAppid regexp "^[0-9]+$")) GROUP BY vAppid,vCmdid,iResult COORDINATE BY unix_timestamp(dtEventTime, 'yyyy-MM-dd HH:mm:ss')*1000 WITH AGGR INTERVAL 60 SECONDS, \
INSERT INTO t_trc_spp_call_1_min SELECT from_unixtime(AGGRTIME DIV 1000, 'yyyyMMddHHmm'),vAppid,iCmd,iResult,count(1),avg(dProcessTime) FROM Msdk_server_Log_Spp WHERE length(vAppid)<50 AND ((vAppid like "wx%") OR (vAppid regexp "^[0-9]+$")) GROUP BY vAppid,iCmd,iResult COORDINATE BY unix_timestamp(dtEventTime, 'yyyy-MM-dd HH:mm:ss')*1000 WITH AGGR INTERVAL 60 SECONDS, \
INSERT INTO t_trc_inf_call_10_min SELECT from_unixtime(AGGRTIME DIV 1000, 'yyyyMMddHHmm'),vAppid,vCmdid,iResult,count(1),avg(dProcessTime) FROM Msdk_server_Log_Route WHERE length(vAppid)<50 AND ((vAppid like "wx%") OR (vAppid regexp "^[0-9]+$")) GROUP BY vAppid,vCmdid,iResult COORDINATE BY unix_timestamp(dtEventTime, 'yyyy-MM-dd HH:mm:ss')*1000 WITH AGGR INTERVAL 600 SECONDS, \
INSERT INTO t_trc_spp_call_10_min SELECT from_unixtime(AGGRTIME DIV 1000, 'yyyyMMddHHmm'),vAppid,iCmd,iResult,count(1),avg(dProcessTime) FROM Msdk_server_Log_Spp WHERE length(vAppid)<50 AND ((vAppid like "wx%") OR (vAppid regexp "^[0-9]+$")) GROUP BY vAppid,iCmd,iResult COORDINATE BY unix_timestamp(dtEventTime, 'yyyy-MM-dd HH:mm:ss')*1000 WITH AGGR INTERVAL 600 SECONDS


[tabledesc-1]
table.name=Msdk_server_Log_Route
table.type=stream
table.fields=ip,string,:interfaceName,string,:iEventId,bigint,:vVersion,string,:vFromIp,string,:vLocalIp,string,:iRequestType,int,:vAppid,string,:vOpenid,string,:vCmdid,int,:vL5_ip_port,string,:iPermission,int,:iResult,int,:dProcessTime,double,:vErrorMsg,string,:dtEventTime,string,:vUrl,string
table.topic=hy_msdk
table.interfaceId=Route
table.type=tube
table.tube.master=tl-vip-tube-master
table.tube.port=8609
table.field.splitter=|
splitter=|

[tabledesc-2]
table.name=Msdk_server_Log_Spp
table.type=stream
table.fields=ip,string,:interfaceName,string,:iFlow,bigint,:iSeq,bigint,:iCmd,int,:vClient_ip,string,:dProcessTime,double,:vServer_ip,string,:dtEventTime,string,:vAppid,string,:vOpenid,string,:vRecvMsg,string,:iResult,int,:vSendMsg,string,:iPlatCode,int
table.topic=hy_msdk
table.interfaceId=spp_server

table.type=tube
table.tube.master=tl-vip-tube-master
table.tube.port=8609
table.field.splitter=|
splitter=|
[tabledesc-3]
table.name=t_trc_inf_call_1_min
table.type=tpg
table.fields=statDate,string,:appId,string,:serviceId,int,:reCode,int,:callCount,bigint,:avgTime,double,

table.tpg.db.host=ieg-bi-tdw.tencent-distribute.com
table.tpg.db.port=5432
table.tpg.db.name=trc_db
table.tpg.db.username=tdw_hfeiye
table.tpg.db.passwd=hfeiye

[tabledesc-4]
table.name=t_trc_spp_call_1_min
table.type=tpg
table.fields=statDate,string,:appId,string,:serviceId,int,:reCode,int,:callCount,bigint,:avgTime,double,

table.tpg.db.host=ieg-bi-tdw.tencent-distribute.com
table.tpg.db.port=5432
table.tpg.db.name=trc_db
table.tpg.db.username=tdw_hfeiye
table.tpg.db.passwd=hfeiye


[tabledesc-5]
table.name=t_trc_inf_call_10_min
table.type=tpg
table.fields=statDate,string,:appId,string,:serviceId,int,:reCode,int,:callCount,bigint,:avgTime,double,

table.tpg.db.host=ieg-bi-tdw.tencent-distribute.com
table.tpg.db.port=5432
table.tpg.db.name=trc_db
table.tpg.db.username=tdw_hfeiye
table.tpg.db.passwd=hfeiye

[tabledesc-6]
table.name=t_trc_spp_call_10_min
table.type=tpg
table.fields=statDate,string,:appId,string,:serviceId,int,:reCode,int,:callCount,bigint,:avgTime,double,

table.tpg.db.host=ieg-bi-tdw.tencent-distribute.com
table.tpg.db.port=5432
table.tpg.db.name=trc_db
table.tpg.db.username=tdw_hfeiye
table.tpg.db.passwd=hfeiye


