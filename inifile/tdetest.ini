[system]
sql1=\
with \
(select g, hllp(x) b, countd_hllp(x) ch from t group by g coordinate by time with aggr interval 20 seconds) tmp, \
(select g as kk, ch, hllp_merge(tmp.b, tdedim.b) ball from tmp left join tdedim on tmp.g=tdedim.k) tmp2 \
insert into tdedim with kk as KEY select kk, ball from tmp2, \
insert into dest select kk, ch, hllp_get(ball) from tmp2

sql2=with \
(select g, hllp(x) b, hllp(y) b1 from t group by g coordinate by time with aggr interval 60 seconds) tmp, \
(select g, hllp_merge(b, b1) ball from tmp) tmp1 \
insert into dest select g, hllp_get(ball) from tmp1


[tabledesc-1]
table.name=t
table.fields=g,string,:x,string,:y,string,:time,bigint,
table.field.splitter=,
table.list.splitter=;
table.map.splitter=:

table.zk.servers=tl-zk-test1:2181,tl-zk-test2:2181,tl-zk-test3:2181,tl-zk-test4:2181,tl-zk-test5:2181
table.zk.root=/meta
table.topic=boss
table.interfaceId=1

[tabledesc-dimtable]
table.type=tde
table.name=tdedim1
table.fields=k,string,:b,binary,
table.field.key=k
table.binary.mode=true

table.field.splitter=,
table.list.splitter=;
table.map.splitter=:

table.tde.master=10.198.15.22:5198
table.tde.slave=10.198.15.99:5198
table.tde.groupname=wx_gk_tdengine
table.tde.tid=1004
table.tde.timeout=5000

[tabledesc-dimtable1]
table.type=redis
table.name=tdedim
table.fields=k,string,:b,binary,
table.field.key=k
table.binary.mode=true

table.field.splitter=,
table.list.splitter=;
table.map.splitter=:

table.redis.host=127.0.0.1
table.redis.port=6379


[tabledesc-2]
table.name=dest
table.binary.mode=false
table.fields=k,string,:cd,bigint,
table.field.splitter=,
table.list.splitter=;
table.map.splitter=:

table.zk.servers=tl-zk-test1:2181,tl-zk-test2:2181,tl-zk-test3:2181,tl-zk-test4:2181,tl-zk-test5:2181
table.zk.root=/meta
table.topic=snglogserver
table.interfaceId=1
table.field.splitter=|



