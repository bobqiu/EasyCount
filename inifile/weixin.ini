[system]
sql=INSERT INTO weixin_res_meta SELECT from_unixtime(AGGRTIME DIV 1000, 'yyyyMMddHHmm'), ttt.Device_, ip_table.country_id, \
COUNT(1), avg(ttt.CostTimeref_) FROM (SELECT Device_, CostTimeref_, CAST ((ClientIP_ - ClientIP_ % 256) AS STRING) AS ipstr \
FROM log_10410 WHERE Funid_='138') ttt LEFT JOIN ip_table ON ttt.ipstr = ip_table.ipint GROUP BY ttt.Device_, ip_table.country_id \
COORDINATE BY TimeStamp_*1000 WITH AGGR INTERVAL 60 SECONDS

[tabledesc-1]
table.name=log_10410
table.type=stream
table.fields=LogID_,bigint,:ProtocolVersion_,bigint,:Uin_,bigint,:IfSuccess_,bigint,:Device_,bigint,:ClientVersion_,bigint,:\
ClientIP_,bigint,:AgentIP_,bigint,:TimeStamp_,bigint,:ExpandCol1_,bigint,:ExpandCol2_,bigint,:SvrIp_,bigint,:SvrPort_,bigint,:\
CostTime_,bigint,:NetType_,bigint,:IpType_,bigint,:Alivetime_,bigint,:ConnectType_,bigint,:Funid_,bigint,:ErrCode_,bigint,:\
SignalStrength_,bigint,:UploadSize_,bigint,:DownloadSize_,bigint,:RetryCount_,bigint,:CostTimeref_,bigint,:\
StartTs_,bigint,:EndTs_,bigint,:ProcessId_,bigint,
table.zk.servers=tl-zk-wx1:2181,tl-zk-wx2:2181,tl-zk-wx3:2181,tl-zk-wx4:2181,tl-zk-wx5:2181
table.zk.root=/meta_weixin
table.topic=cdg_weixin_perf_msg
table.interfaceId=log_10410

table.field.splitter=,
table.list.splitter=;
table.map.splitter=:


[tabledesc-tde]
table.name=ip_table
table.type=tde
table.fields=ipint,string,:country_id,string,:province_name,string,:isp_name,string,:city_name,string,:country_name,string,:\
province_id,string,:city_id,string,:isp_id,string,

table.field.splitter=,
table.list.splitter=;
table.map.splitter=:

table.tde.master=10.208.146.154:5198
table.tde.slave=10.208.146.172:5198
table.tde.groupname=comm_gk_tdengine
table.tde.tid=1000
table.tde.timeout=5000

[tabledesc-meta]
table.name=weixin_res_meta
table.type=stream
table.fields=statDate,string,:device,string,:country,string,:cnt,bigint,:avgTime,double,
table.zk.servers=tl-zk-test1:2181,tl-zk-test2:2181,tl-zk-test3:2181,tl-zk-test4:2181,tl-zk-test5:2181
table.zk.root=/meta
table.topic=weixin_trc_test
table.interfaceId=1
table.field.splitter=,
table.list.splitter=;
table.map.splitter=:





