[system]
sql= \
with \
( \
	select \
		cast(rand()*2+10000 as int) as Uin, \
		cast(rand()*10+10000 as int) as GroupId, \
		from_unixtime(unix_timestamp(), "yyyy-MM-dd HH:mm:ss") as AddGroupTime \
	from __innertable(1000) \
) rand_add_group_stream \
\
insert into add_group_result \
select from_unixtime(unix_timestamp(), "yyyy-MM-dd HH:mm"), GroupId, COUNT(1) \
from rand_add_group_stream \
group by GroupId \
coordinate by unix_timestamp()*1000 \
with aggr interval 60 seconds

[tabledesc-add_group_stream]
table.type=stream
table.name=add_group_stream
table.fields=Uin,bigint,:GroupId,bigint,:AddGroupTime,string,
table.field.splitter=|

table.zk.servers=tl-zk-test1:2181
table.zk.root=/meta
table.topic=qqgroup_test
table.interfaceId=add_group_stream 

[tabledesc-add_group_result]
table.type=mysql
table.name=add_group_result
table.fields=ftime,string,:group_id,int,:add_sum,bigint,

table.mysql.db.host=172.27.204.163
table.mysql.db.port=3306
table.mysql.db.name=tdw_data
table.mysql.db.username=root
table.mysql.db.passwd=tcqun2007

