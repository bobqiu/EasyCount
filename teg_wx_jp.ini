[system]
sql=insert into res_10074_ip with attr as ATTRS select LogID_,ProtocolVersion_,Uin_,IfSuccess_,Device_,ClientVersion_,ClientIP_,AgentIP_,TimeStamp_,\
ExpandCol1_,ExpandCol2_,ImgSize_,NetType_,DelayTime_,RetCode_,DnsCostTime_,ConnectCostTime_,SendCostTime_,\
WaitResponseCostTime_,ReceiveCostTime_,ClientAddrIP_,ServerAddrIP_, startip, endip, country_id, province_id, city_id, \
isp_id, country_name, province_name, city_name, isp_name, c_ip from (select LogID_,ProtocolVersion_,Uin_,IfSuccess_,\ 
Device_,ClientVersion_,ClientIP_,AgentIP_,TimeStamp_,\
ExpandCol1_,ExpandCol2_,ImgSize_,NetType_,DelayTime_,RetCode_,DnsCostTime_,ConnectCostTime_,SendCostTime_,\
WaitResponseCostTime_,ReceiveCostTime_,ClientAddrIP_,ServerAddrIP_, ATTRS attr from log_10074) log left join ip_table \
on (log.ClientIP_ - log.ClientIP_ % 256)=ip_table.startip, \
\
insert into res_10075_ip with attr as ATTRS select LogID_,ProtocolVersion_,Uin_,IfSuccess_,Device_,ClientVersion_,ClientIP_,AgentIP_,TimeStamp_,\
ExpandCol1_,ExpandCol2_,ImgSize_,NetType_,DelayTime_,RetCode_,DnsCostTime_,ConnectCostTime_,SendCostTime_,\
WaitResponseCostTime_,ReceiveCostTime_,ClientAddrIP_,ServerAddrIP_, startip, endip, country_id, province_id, city_id, \
isp_id, country_name, province_name, city_name, isp_name, c_ip from (select LogID_,ProtocolVersion_,Uin_,\ 
IfSuccess_,Device_,ClientVersion_,ClientIP_,AgentIP_,TimeStamp_,\
ExpandCol1_,ExpandCol2_,ImgSize_,NetType_,DelayTime_,RetCode_,DnsCostTime_,ConnectCostTime_,SendCostTime_,\
WaitResponseCostTime_,ReceiveCostTime_,ClientAddrIP_,ServerAddrIP_, ATTRS attr from log_10075) log1 left join ip_table \
on (log1.ClientIP_ - log1.ClientIP_ % 256)=ip_table.startip, \
\
insert into __printtable select 10074, AGGRTIME DIV 1000, count(1) from log_10074, \
insert into __printtable select 10075, AGGRTIME DIV 1000, count(1) from log_10075

[tabledesc-10074]
table.name=log_10074
table.fields=LogID_,BIGINT,:ProtocolVersion_,BIGINT,:Uin_,BIGINT,:IfSuccess_,BIGINT,:Device_,BIGINT,:ClientVersion_,BIGINT,:\
ClientIP_,BIGINT,:AgentIP_,BIGINT,:TimeStamp_,BIGINT,:ExpandCol1_,BIGINT,:ExpandCol2_,BIGINT,:ImgSize_,BIGINT,:NetType_,BIGINT,:\
DelayTime_,BIGINT,:RetCode_,BIGINT,:DnsCostTime_,BIGINT,:ConnectCostTime_,BIGINT,:SendCostTime_,BIGINT,:WaitResponseCostTime_,BIGINT,:\
ReceiveCostTime_,BIGINT,:ClientAddrIP_,BIGINT,:ServerAddrIP_,BIGINT,
table.tdsort.attrs=p=t
table.field.splitter=,
table.list.splitter=;
table.map.splitter=:
table.zk.servers=tl-zk-td1:2181,tl-zk-td2:2181,tl-zk-td3:2181,tl-zk-td4:2181,tl-zk-td5:2181
table.zk.root=/meta
table.topic=teg_weixin_msg_to_jp
table.interfaceId=10074

[tabledesc-10075]
table.name=log_10075
table.fields=LogID_,BIGINT,:ProtocolVersion_,BIGINT,:Uin_,BIGINT,:IfSuccess_,BIGINT,:Device_,BIGINT,:ClientVersion_,BIGINT,:\
ClientIP_,BIGINT,:AgentIP_,BIGINT,:TimeStamp_,BIGINT,:ExpandCol1_,BIGINT,:ExpandCol2_,BIGINT,:ImgSize_,BIGINT,:NetType_,BIGINT,:\
DelayTime_,BIGINT,:RetCode_,BIGINT,:DnsCostTime_,BIGINT,:ConnectCostTime_,BIGINT,:SendCostTime_,BIGINT,:WaitResponseCostTime_,BIGINT,:\
ReceiveCostTime_,BIGINT,:ClientAddrIP_,BIGINT,:ServerAddrIP_,BIGINT,
table.tdsort.attrs=p=t
table.field.splitter=,
table.list.splitter=;
table.map.splitter=:
table.zk.servers=tl-zk-td1:2181,tl-zk-td2:2181,tl-zk-td3:2181,tl-zk-td4:2181,tl-zk-td5:2181
table.zk.root=/meta
table.topic=teg_weixin_msg_to_jp
table.interfaceId=10075

[tabledesc-tde]
table.name=ip_table
table.type=tde
table.tde.read.async=true
table.fields=startip,bigint,:endip,bigint,:country_id,bigint,:province_id,bigint,:city_id,bigint,:isp_id,bigint,:\
country_name,string,:province_name,string,:city_name,string,:isp_name,string,:c_ip,string,

table.field.splitter=,

table.tde.master=10.208.146.154:5198
table.tde.slave=10.208.146.172:5198
table.tde.groupname=comm_gk_tdengine
table.tde.tid=1001
table.tde.timeout=5000

[tabledesc-res_10074_ip]
table.name=res_10074_ip
table.fields=LogID_,BIGINT,:ProtocolVersion_,BIGINT,:Uin_,BIGINT,:IfSuccess_,BIGINT,:Device_,BIGINT,:ClientVersion_,BIGINT,:\
ClientIP_,BIGINT,:AgentIP_,BIGINT,:TimeStamp_,BIGINT,:ExpandCol1_,BIGINT,:ExpandCol2_,BIGINT,:ImgSize_,BIGINT,:NetType_,BIGINT,:\
DelayTime_,BIGINT,:RetCode_,BIGINT,:DnsCostTime_,BIGINT,:ConnectCostTime_,BIGINT,:SendCostTime_,BIGINT,:WaitResponseCostTime_,BIGINT,:\
ReceiveCostTime_,BIGINT,:ClientAddrIP_,BIGINT,:ServerAddrIP_,BIGINT,:startip,bigint,:endip,bigint,:country_id,bigint,:\
province_id,bigint,:city_id,bigint,:isp_id,bigint,:country_name,string,:province_name,string,:city_name,string,:isp_name,string,:c_ip,string
table.tdsort.attrs=p=t
table.field.splitter=,
table.list.splitter=;
table.map.splitter=:
table.zk.servers=tl-zk-wx1:2181,tl-zk-wx2:2181,tl-zk-wx4:2181,tl-zk-wx5:2181
table.zk.root=/meta_weixin
table.topic=teg_wx_ip
table.interfaceId=10074_ip

[tabledesc-res_10075_ip]
table.name=res_10075_ip
table.fields=LogID_,BIGINT,:ProtocolVersion_,BIGINT,:Uin_,BIGINT,:IfSuccess_,BIGINT,:Device_,BIGINT,:ClientVersion_,BIGINT,:\
ClientIP_,BIGINT,:AgentIP_,BIGINT,:TimeStamp_,BIGINT,:ExpandCol1_,BIGINT,:ExpandCol2_,BIGINT,:ImgSize_,BIGINT,:NetType_,BIGINT,:\
DelayTime_,BIGINT,:RetCode_,BIGINT,:DnsCostTime_,BIGINT,:ConnectCostTime_,BIGINT,:SendCostTime_,BIGINT,:WaitResponseCostTime_,BIGINT,:\
ReceiveCostTime_,BIGINT,:ClientAddrIP_,BIGINT,:ServerAddrIP_,BIGINT,:startip,bigint,:endip,bigint,:country_id,bigint,:\
province_id,bigint,:city_id,bigint,:isp_id,bigint,:country_name,string,:province_name,string,:city_name,string,:isp_name,string,:c_ip,string
table.tdsort.attrs=p=t
table.field.splitter=,
table.list.splitter=;
table.map.splitter=:
table.zk.servers=tl-zk-wx1:2181,tl-zk-wx2:2181,tl-zk-wx4:2181,tl-zk-wx5:2181
table.zk.root=/meta_weixin
table.topic=teg_wx_ip
table.interfaceId=10075_ip


[tabledesc-res_10074_ip_test]
table.name=res_10074_ip_test
table.fields=LogID_,BIGINT,:ProtocolVersion_,BIGINT,:Uin_,BIGINT,:IfSuccess_,BIGINT,:Device_,BIGINT,:ClientVersion_,BIGINT,:\
ClientIP_,BIGINT,:AgentIP_,BIGINT,:TimeStamp_,BIGINT,:ExpandCol1_,BIGINT,:ExpandCol2_,BIGINT,:ImgSize_,BIGINT,:NetType_,BIGINT,:\
DelayTime_,BIGINT,:RetCode_,BIGINT,:DnsCostTime_,BIGINT,:ConnectCostTime_,BIGINT,:SendCostTime_,BIGINT,:WaitResponseCostTime_,BIGINT,:\
ReceiveCostTime_,BIGINT,:ClientAddrIP_,BIGINT,:ServerAddrIP_,BIGINT,:startip,bigint,:endip,bigint,:country_id,bigint,:\
province_id,bigint,:city_id,bigint,:isp_id,bigint,:country_name,string,:province_name,string,:city_name,string,:isp_name,string,:c_ip,string
table.tdsort.attrs=p=t
table.field.splitter=,
table.list.splitter=;
table.map.splitter=:
table.zk.servers=tl-zk-test1:2181
table.zk.root=/meta
table.topic=test
table.interfaceId=10074_ip

[tabledesc-res_10075_ip_test]
table.name=res_10075_ip_test
table.fields=LogID_,BIGINT,:ProtocolVersion_,BIGINT,:Uin_,BIGINT,:IfSuccess_,BIGINT,:Device_,BIGINT,:ClientVersion_,BIGINT,:\
ClientIP_,BIGINT,:AgentIP_,BIGINT,:TimeStamp_,BIGINT,:ExpandCol1_,BIGINT,:ExpandCol2_,BIGINT,:ImgSize_,BIGINT,:NetType_,BIGINT,:\
DelayTime_,BIGINT,:RetCode_,BIGINT,:DnsCostTime_,BIGINT,:ConnectCostTime_,BIGINT,:SendCostTime_,BIGINT,:WaitResponseCostTime_,BIGINT,:\
ReceiveCostTime_,BIGINT,:ClientAddrIP_,BIGINT,:ServerAddrIP_,BIGINT,:startip,bigint,:endip,bigint,:country_id,bigint,:\
province_id,bigint,:city_id,bigint,:isp_id,bigint,:country_name,string,:province_name,string,:city_name,string,:isp_name,string,:c_ip,string
table.tdsort.attrs=p=t
table.field.splitter=,
table.list.splitter=;
table.map.splitter=:
table.zk.servers=tl-zk-test1:2181
table.zk.root=/meta
table.topic=test
table.interfaceId=10075_ip




